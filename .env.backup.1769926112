#!/bin/bash
# AI Platform Environment Configuration
# Generated: 2026-02-01
# Version: 10.0

# Core Paths (set only if not already set)
: ${PROJECT_ROOT:="/home/jglaine/AIPlatformAutomation"}
: ${SCRIPTS_DIR:="${PROJECT_ROOT}/scripts"}
: ${STACKS_DIR:="${PROJECT_ROOT}/stacks"}
: ${DATA_DIR:="/mnt/data"}
: ${CONFIG_DIR:="${PROJECT_ROOT}/data"}
: ${LOGS_DIR:="${PROJECT_ROOT}/logs"}

# Docker
: ${DOCKER_NETWORK:="ai-platform"}
: ${DOCKER_SUBNET:="172.20.0.0/16"}

# Ollama
: ${OLLAMA_HOST:="0.0.0.0"}
: ${OLLAMA_PORT:="11434"}
: ${OLLAMA_MODELS:="llama3.2:3b qwen2.5:7b"}

# LiteLLM
: ${LITELLM_PORT:="4000"}
: ${LITELLM_MASTER_KEY:="sk-$(openssl rand -hex 16)"}

# AnythingLLM
: ${ANYTHINGLLM_PORT:="3001"}
: ${ANYTHINGLLM_STORAGE:="${DATA_DIR}/anythingllm"}

# Clawdbot
: ${CLAWDBOT_PORT:="3000"}

# Dify
: ${POSTGRES_DB:="dify"}
: ${POSTGRES_USER:="dify"}
: ${POSTGRES_PASSWORD:="$(openssl rand -base64 16)"}
: ${POSTGRES_PORT:="5432"}
: ${REDIS_PASSWORD:="$(openssl rand -base64 16)"}
: ${REDIS_PORT:="6379"}
: ${DIFY_SECRET_KEY:="$(openssl rand -hex 32)"}
: ${DIFY_API_BASE_URL:="http://dify-nginx:80/api"}

# n8n
: ${N8N_PORT:="5678"}
: ${N8N_ENCRYPTION_KEY:="$(openssl rand -hex 32)"}
: ${N8N_USER_MANAGEMENT_JWT_SECRET:="$(openssl rand -hex 32)"}

# Signal API
: ${SIGNAL_PRIMARY_NUMBER:="+1234567890"}
: ${SIGNAL_SECONDARY_NUMBER:="+0987654321"}

# Google Drive
: ${GDRIVE_REMOTE:="gdrive"}
: ${GDRIVE_SYNC_DIR:="${DATA_DIR}/gdrive"}

# External APIs (optional - add your keys here)
: ${ANTHROPIC_API_KEY:=""}
: ${OPENAI_API_KEY:=""}

# Nginx
: ${NGINX_PORT:="8443"}

# Export all (only if running in script context)
if [[ "${BASH_SOURCE[0]}" != "${0}" ]]; then
    export PROJECT_ROOT SCRIPTS_DIR STACKS_DIR DATA_DIR CONFIG_DIR LOGS_DIR
    export DOCKER_NETWORK DOCKER_SUBNET
    export OLLAMA_HOST OLLAMA_PORT OLLAMA_MODELS
    export LITELLM_PORT LITELLM_MASTER_KEY
    export ANYTHINGLLM_PORT ANYTHINGLLM_STORAGE
    export CLAWDBOT_PORT
    export POSTGRES_DB POSTGRES_USER POSTGRES_PASSWORD POSTGRES_PORT
    export REDIS_PASSWORD REDIS_PORT
    export DIFY_SECRET_KEY DIFY_API_BASE_URL
    export N8N_PORT N8N_ENCRYPTION_KEY N8N_USER_MANAGEMENT_JWT_SECRET
    export SIGNAL_PRIMARY_NUMBER SIGNAL_SECONDARY_NUMBER
    export GDRIVE_REMOTE GDRIVE_SYNC_DIR
    export ANTHROPIC_API_KEY OPENAI_API_KEY
    export NGINX_PORT
fi
